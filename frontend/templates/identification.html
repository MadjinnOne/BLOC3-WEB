{% extends "base.html" %}

{% block title %}Identification{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/style_identification.css">
{% endblock %}

{% block content %}

{% if success %}
<div class="message success">Inscription réussie ! Vous pouvez vous connecter.</div>
{% endif %}

{% if error == 'exists' %}
<div class="message error">Cette adresse email est déjà utilisée.</div>
{% endif %}

{% if error == 'notfound' %}
<div class="message error">Utilisateur non trouvé.</div>
{% elif error == 'invalid' %}
<div class="message error">Mot de passe incorrect.</div>
{% endif %}

<div class="identification-container">
    <div id="form-connexion" class="form-container">
        <h2>Connexion</h2>
        <form method="post" action="/login">
            <label for="login_email">Email :</label>
            <input type="email" id="login_email" name="email" required>

            <label for="login_password">Mot de passe :</label>
            <input type="password" id="login_password" name="password" required>

            <button type="submit">Se connecter</button>
        </form>
        <p class="toggle-form"><a href="#" onclick="switchForm('inscription')">Pas encore de compte ? Inscrivez-vous</a></p>
    </div>

    <div id="form-inscription" class="form-container" style="display: none;">
        <h2>Inscription</h2>
        <form method="post" action="/register">
            <label for="prenom">Prénom :</label>
            <input type="text" id="prenom" name="prenom" required>

            <label for="nom">Nom :</label>
            <input type="text" id="nom" name="nom" required>

            <label for="email">Email :</label>
            <input type="email" id="register_email" name="email" required>

            <label for="fonction">Fonction :</label>
            <select name="fonction" id="fonction" required>
                <option value="">-- Sélectionner --</option>
                <option value="maman">Maman</option>
                <option value="papa">Papa</option>
                <option value="prof">Professeur</option>
                <option value="directeur">Directeur</option>
                <option value="PO">Membre du PO</option>
            </select>

            <label for="ville">Ville :</label>
            <input list="suggestions-ville" id="ville" name="ville" required autocomplete="off">
            <datalist id="suggestions-ville"></datalist>

            <label for="code_postal">Code postal :</label>
            <input type="text" id="code_postal" name="code_postal" required readonly>

            <label for="rue">Rue et numéro :</label>
            <input list="suggestions-rue" id="rue" name="rue_et_numero" required autocomplete="off">
            <datalist id="suggestions-rue"></datalist>


            <label for="telephone">Téléphone :</label>
            <input type="text" id="telephone" name="telephone" required>

            <label for="password">Mot de passe :</label>
            <input type="password" id="password" name="password" required>

            <button type="submit">S'inscrire</button>
        </form>
        <p class="toggle-form"><a href="#" onclick="switchForm('connexion')">Déjà inscrit ? Se connecter</a></p>
    </div>
</div>

<!-- Script JS externe -->
<script src="/static/js/autocomplete.js"></script>

{% endblock %}
